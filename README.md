# O.dev Test task
Тестовое задание на позицию Python Backend

## Как запустить сервис:
1. Склонировать репозиторий
2. Указать энпдоинт для подключения к Ethereum ноде в *docker-compose.yml* файле. 
Переменная называется "REMOTE_NODE_ENDPOINT" (сервис "cryptocurrency_service")
3. Указать пароль для кодирования приватных ключей от кошельков в *docker-compose.yml* файле. 
Переменная называется "PRIVATE_KEY_ENCRYPTION_PASS" (сервис "cryptocurrency_service").
В качестве пароля можно указать **любую строку**
4. Запустить сервис + базу данных с помощью docker-compose up

   (4.1.) при желании можно также раскомментировать volume для PostgreSQL
5. API будет доступно по эндпоинту http://127.0.0.1:8000/

### О кодировании private_key для кошельков:
Чтобы не хранить private_key кошельков в открытом виде, они шифруются и в виде json'а записываются в БД. Для того, 
чтобы зашифровать private_key, нужен пароль, и для упрощения задачи я сделал один пароль для всех private_key.
Этот пароль берется из переменной окружения "PRIVATE_KEY_ENCRYPTION_PASS". Используя этот же пароль, также можно будет
расшифровать хранимые ключи, поэтому не рекомендуется его изменять (иначе не получится расшифровать private_key 
старых кошельков).


## Тесты:
Тесты запускаются в локальном окружении. Также, в отдельном контейнере запускается тестовая БД PostgreSQL. 
Для запуска локально нужно:
1. Раскомментировать строчки в *requirements.txt* файле после "#for local environment", поставить зависимости (через pip install -r requirements.txt)
2. Создать .env файл (см .env.example) и в нем указать значения для переменных "PRIVATE_KEY_ENCRYPTION_PASS"
и "REMOTE_NODE_ENDPOINT", установить переменные окружения (или задать их любым другим удобным способом)
3. Запустить контейнер с тестовой базой данных: docker-compose run  -p 5432:5432 -d postgresql
4. Из директории server (директория, где находится файл *manage.py*) выполнить команду "pytest"


## Документация:
Документация доступна по эндпоинту http://127.0.0.1:8000/api/v1/schema/swagger-ui/
